<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
  <title>@DOC_TITLE@</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>

<table width="100%" height="10%" bgcolor="#FFFFFF">
  <tr>
    <td colspan="2"><p><A href=http://www.atmel.com ><img src="atmel.jpg"/ border=0></A></p><br /></td>
    <td colspan="2"> <strong><font face="Helvetica" color="#000000" size="+3">Xmega Application Note</font></strong></td>
    <td colspan="2"><p><A href=http://www.atmel.com/products/AVR><img src="AVR_logo_blue.gif"/ border=0></A></p><br /></td>
  </tr>
  <tr>
    <td colspan="6" height="1" background="blue.gif"></td>
  </tr>
</table>
<!-- Generated by Doxygen 1.6.3 -->
<div class="contents">
<h1>ADC module<br/>
<small>
[<a class="el" href="group__adc__group.html">Analog to Digital Converter (ADC)</a>]</small>
</h1>
<p><div class="dynheader">
Collaboration diagram for ADC module:</div>
<div class="dynsection">
</div>
</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structadc__config.html">adc_config</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ADC configuration.  <a href="structadc__config.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga341fbc7d7b20fbdd523b937836ca9c3e">adc_calibration_data</a> { <a class="el" href="group__adc__module__group.html#gga341fbc7d7b20fbdd523b937836ca9c3ead6272ef64cbf9632a057fae33c406d47">ADC_CAL_ADCA</a>, 
<a class="el" href="group__adc__module__group.html#gga341fbc7d7b20fbdd523b937836ca9c3ea3ea17195c94dafe12ac91bba4e73556d">ADC_CAL_ADCB</a>, 
<a class="el" href="group__adc__module__group.html#gga341fbc7d7b20fbdd523b937836ca9c3eaca159f3820a9b128f30654ba8da3c468">ADC_CAL_TEMPSENSE</a>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>ADC calibration data. </p>
 <a href="group__adc__module__group.html#ga341fbc7d7b20fbdd523b937836ca9c3e">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga91b0f997d73739cf9f7349b7581e1f56">adc_reference</a> { <a class="el" href="group__adc__module__group.html#gga91b0f997d73739cf9f7349b7581e1f56aa0d7c4771b18379ba0035a34efe6836c">ADC_REF_BANDGAP</a> =  ADC_REFSEL_INT1V_gc, 
<a class="el" href="group__adc__module__group.html#gga91b0f997d73739cf9f7349b7581e1f56a981e046382f20706a40b28d9e07917d4">ADC_REF_VCC</a> =  ADC_REFSEL_VCC_gc, 
<a class="el" href="group__adc__module__group.html#gga91b0f997d73739cf9f7349b7581e1f56a427fce812ad2aaf752856514d13285da">ADC_REF_AREFA</a> =  ADC_REFSEL_AREFA_gc, 
<a class="el" href="group__adc__module__group.html#gga91b0f997d73739cf9f7349b7581e1f56a83d1f62e8c9e2e2a199463bf2638bc33">ADC_REF_AREFB</a> =  ADC_REFSEL_AREFB_gc
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>ADC reference settings. </p>
 <a href="group__adc__module__group.html#ga91b0f997d73739cf9f7349b7581e1f56">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga14f1a9a4dda5ef84b87ca7a76b0c91b6">adc_resolution</a> { <a class="el" href="group__adc__module__group.html#gga14f1a9a4dda5ef84b87ca7a76b0c91b6aa6ba55441d34264812d9ef4bfd0e226b">ADC_RES_8</a> =  ADC_RESOLUTION_8BIT_gc, 
<a class="el" href="group__adc__module__group.html#gga14f1a9a4dda5ef84b87ca7a76b0c91b6aea210513f386e09439ece14526c5f07d">ADC_RES_12</a> =  ADC_RESOLUTION_12BIT_gc, 
<a class="el" href="group__adc__module__group.html#gga14f1a9a4dda5ef84b87ca7a76b0c91b6adfc6472960a68c40f5014abd43280975">ADC_RES_12_LEFT</a> =  ADC_RESOLUTION_LEFT12BIT_gc
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>ADC resolution settings. </p>
 <a href="group__adc__module__group.html#ga14f1a9a4dda5ef84b87ca7a76b0c91b6">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga9782331e138d6a97f4b50ed03d983e2e">adc_sign</a> { <a class="el" href="group__adc__module__group.html#gga9782331e138d6a97f4b50ed03d983e2ea67fe5b6edafcfa3808a6fcbb7dd127d1">ADC_SIGN_OFF</a>, 
<a class="el" href="group__adc__module__group.html#gga9782331e138d6a97f4b50ed03d983e2ea245f8ab6f5f4120e59a77b29b5f169e3">ADC_SIGN_ON</a> =  ADC_CONMODE_bm
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>ADC signedness settings. </p>
 <a href="group__adc__module__group.html#ga9782331e138d6a97f4b50ed03d983e2e">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#gadac5df7f2a1fa6df2915490437034183">adc_trigger</a> { <a class="el" href="group__adc__module__group.html#ggadac5df7f2a1fa6df2915490437034183a3cfd949e9ec31e2cc42eec32e8f7bb7d">ADC_TRIG_MANUAL</a>, 
<a class="el" href="group__adc__module__group.html#ggadac5df7f2a1fa6df2915490437034183a3581b09e96b8fd911d581096e0700893">ADC_TRIG_FREERUN_SWEEP</a>, 
<a class="el" href="group__adc__module__group.html#ggadac5df7f2a1fa6df2915490437034183a31ff7d5ee36cfe5a3d3ff75a2852cdbb">ADC_TRIG_EVENT_SINGLE</a>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>ADC conversion trigger settings. </p>
 <a href="group__adc__module__group.html#gadac5df7f2a1fa6df2915490437034183">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>ADC module management</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp74da91d05f6fccec19bd99ec9cbad190"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#gad78eaa438cdc1d451052cd01dd022cd5">adc_clear_interrupt_flag</a> (ADC_t *adc, uint8_t ch_mask)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clear interrupt flag of ADC channel(s).  <a href="#gad78eaa438cdc1d451052cd01dd022cd5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga5bfe255d589e390363417fa6081252ed">adc_disable</a> (ADC_t *adc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disable ADC.  <a href="#ga5bfe255d589e390363417fa6081252ed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga2072427727c963ff84c0f17021d05cbb">adc_enable</a> (ADC_t *adc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable ADC.  <a href="#ga2072427727c963ff84c0f17021d05cbb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga61058c089475447263f4a3efbba9664a">adc_flush</a> (ADC_t *adc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flush the ADC.  <a href="#ga61058c089475447263f4a3efbba9664a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga7c481b96d51e71dfa50b84c785d1920d">adc_get_calibration_data</a> (enum <a class="el" href="group__adc__module__group.html#ga341fbc7d7b20fbdd523b937836ca9c3e">adc_calibration_data</a> cal)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get calibration data.  <a href="#ga7c481b96d51e71dfa50b84c785d1920d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga75e6395610cba973d9135f7ff528309d">adc_get_interrupt_flag</a> (ADC_t *adc, uint8_t ch_mask)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get interrupt flag of ADC channel(s).  <a href="#ga75e6395610cba973d9135f7ff528309d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#gaadfed93060b6a55fdbd6abe294c0e67b">adc_get_signed_compare_value</a> (ADC_t *adc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get signed compare value directly from ADC.  <a href="#gaadfed93060b6a55fdbd6abe294c0e67b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#gadf69c5a7b18b4d9ced9b954d297ca6d4">adc_get_unsigned_compare_value</a> (ADC_t *adc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get unsigned compare value directly from ADC.  <a href="#gadf69c5a7b18b4d9ced9b954d297ca6d4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="compiler_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga36bcc0b840eb43c7928afe617da86d83">adc_is_enabled</a> (ADC_t *adc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if the ADC is enabled.  <a href="#ga36bcc0b840eb43c7928afe617da86d83"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga7ebc3dec12aad3001799f3aa39b49f2a">adc_start_conversion</a> (ADC_t *adc, uint8_t ch_mask)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start one-shot conversion on ADC channel(s).  <a href="#ga7ebc3dec12aad3001799f3aa39b49f2a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#gadfda8234be4fc01c1b4edfd870dff48a">adc_wait_for_interrupt_flag</a> (ADC_t *adc, uint8_t ch_mask)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait for interrupt flag of ADC channel(s).  <a href="#gadfda8234be4fc01c1b4edfd870dff48a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga93782dc0962492f0720f7c696d30dd89">adc_get_compare_value</a>(adc)&nbsp;&nbsp;&nbsp;((adc)-&gt;CMP)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get compare value directly from ADC.  <a href="#ga93782dc0962492f0720f7c696d30dd89"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga45b4f6e5370958415e9d86a6c3ec8961">adc_set_compare_value</a>(adc, val)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set compare value directly to ADC.  <a href="#ga45b4f6e5370958415e9d86a6c3ec8961"></a><br/></td></tr>
<tr><td colspan="2"><h2>ADC module configuration</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp065d00836aa1fe15beffc4d7b2a43b0e"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#gac8e249046e5da4bbdc560008f5f90a60">adc_disable_internal_input</a> (struct <a class="el" href="structadc__config.html">adc_config</a> *conf, uint8_t int_inp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disable internal ADC input.  <a href="#gac8e249046e5da4bbdc560008f5f90a60"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga7150241e8a1e2168ba7fcf14f1006061">adc_enable_internal_input</a> (struct <a class="el" href="structadc__config.html">adc_config</a> *conf, uint8_t int_inp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable internal ADC input.  <a href="#ga7150241e8a1e2168ba7fcf14f1006061"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#gac9e66ca0b0044edf984d8c343dec1b6c">adc_read_configuration</a> (ADC_t *adc, struct <a class="el" href="structadc__config.html">adc_config</a> *conf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read configuration from ADC module.  <a href="#gac9e66ca0b0044edf984d8c343dec1b6c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga7c78a3ba0a8b13d02a1464ddf1f40586">adc_set_clock_rate</a> (struct <a class="el" href="structadc__config.html">adc_config</a> *conf, uint32_t clk_adc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set ADC prescaler to get desired clock rate.  <a href="#ga7c78a3ba0a8b13d02a1464ddf1f40586"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#gae74a2f676cac7feff9a38e6af6f899e2">adc_set_conversion_parameters</a> (struct <a class="el" href="structadc__config.html">adc_config</a> *conf, enum <a class="el" href="group__adc__module__group.html#ga9782331e138d6a97f4b50ed03d983e2e">adc_sign</a> sign, enum <a class="el" href="group__adc__module__group.html#ga14f1a9a4dda5ef84b87ca7a76b0c91b6">adc_resolution</a> res, enum <a class="el" href="group__adc__module__group.html#ga91b0f997d73739cf9f7349b7581e1f56">adc_reference</a> ref)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set ADC conversion parameters.  <a href="#gae74a2f676cac7feff9a38e6af6f899e2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga48ca852e202a1da855eb07d1c71c292d">adc_set_conversion_trigger</a> (struct <a class="el" href="structadc__config.html">adc_config</a> *conf, enum <a class="el" href="group__adc__module__group.html#gadac5df7f2a1fa6df2915490437034183">adc_trigger</a> trig, uint8_t nr_of_ch, uint8_t base_ev_ch)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set ADC conversion trigger.  <a href="#ga48ca852e202a1da855eb07d1c71c292d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga617d7a4c8a2c60c0c44bc3602c48b7ef">adc_write_configuration</a> (ADC_t *adc, const struct <a class="el" href="structadc__config.html">adc_config</a> *conf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write configuration to ADC module.  <a href="#ga617d7a4c8a2c60c0c44bc3602c48b7ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga4323c7b62348e69cba70801b5037a023">adc_get_config_compare_value</a>(conf)&nbsp;&nbsp;&nbsp;(conf-&gt;cmp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get ADC compare value from configuration.  <a href="#ga4323c7b62348e69cba70801b5037a023"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#gac34bf511fa31e6a4acf7177a5c241d1c">adc_set_config_compare_value</a>(conf, val)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set ADC compare value in configuration.  <a href="#gac34bf511fa31e6a4acf7177a5c241d1c"></a><br/></td></tr>
<tr><td colspan="2"><h2>ADC channel masks</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp4587cb55f04cc53028d4320550aecca1"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga1e33b83bfcf4433eb2e8c6e818b5dff8">ADC_CH0</a>&nbsp;&nbsp;&nbsp;(1U &lt;&lt; 0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ADC channel 0.  <a href="#ga1e33b83bfcf4433eb2e8c6e818b5dff8"></a><br/></td></tr>
<tr><td colspan="2"><h2>Internal ADC input masks</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp74236944c76133b4fc22deecc01350e8"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga8a4cf01db45542b2826c59a1f45517d9">ADC_INT_BANDGAP</a>&nbsp;&nbsp;&nbsp;ADC_BANDGAP_bm</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bandgap reference.  <a href="#ga8a4cf01db45542b2826c59a1f45517d9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#gaaa76597541bd696349e98ad44a789b62">ADC_INT_TEMPSENSE</a>&nbsp;&nbsp;&nbsp;ADC_TEMPREF_bm</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Temperature sensor.  <a href="#gaaa76597541bd696349e98ad44a789b62"></a><br/></td></tr>
<tr><td colspan="2"><h2>Calibration data addresses</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpa918a9f44e13cd90b287296f5bfcde98"></a> </p>
<dl class="note"><dt><b>Note:</b></dt><dd>The temperature sensor calibration is sampled at 85 degrees Celsius with unsigned, 12-bit conversion. </dd></dl>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga38d4aaf5ee11df29de48c8cf9e9cd5a6">ADCACAL0</a>&nbsp;&nbsp;&nbsp;offsetof(NVM_PROD_SIGNATURES_t, ADCACAL0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ADC A, calibration byte 0.  <a href="#ga38d4aaf5ee11df29de48c8cf9e9cd5a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga62dd16cd9477462a07261fc3b09c03cf">ADCACAL1</a>&nbsp;&nbsp;&nbsp;offsetof(NVM_PROD_SIGNATURES_t, ADCACAL1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ADC A, calibration byte 1.  <a href="#ga62dd16cd9477462a07261fc3b09c03cf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#gab232646c63dfd62eccee7babfb23da5d">ADCBCAL0</a>&nbsp;&nbsp;&nbsp;offsetof(NVM_PROD_SIGNATURES_t, ADCBCAL0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ADC B, calibration byte 0.  <a href="#gab232646c63dfd62eccee7babfb23da5d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga852d973507f35a5794118767601b539d">ADCBCAL1</a>&nbsp;&nbsp;&nbsp;offsetof(NVM_PROD_SIGNATURES_t, ADCBCAL1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ADC B, calibration byte 1.  <a href="#ga852d973507f35a5794118767601b539d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#ga24cbfb6d0871a0e63e9381f6f6410900">TEMPSENSE0</a>&nbsp;&nbsp;&nbsp;offsetof(NVM_PROD_SIGNATURES_t, TEMPSENSE0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Temperature sensor calibration byte 0.  <a href="#ga24cbfb6d0871a0e63e9381f6f6410900"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__module__group.html#gacd3e183ef514af5ada84371df2867889">TEMPSENSE1</a>&nbsp;&nbsp;&nbsp;offsetof(NVM_PROD_SIGNATURES_t, TEMPSENSE1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Temperature sensor calibration byte 1.  <a href="#gacd3e183ef514af5ada84371df2867889"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Management and configuration functions for the ADC module.</p>
<p>The API functions and definitions can be divided in three groups:</p>
<ul>
<li>interrupt callback: configure and set interrupt callback function.</li>
<li>module management: direct access for enabling and disabling the ADC, starting conversions, getting interrupt flags, etc.</li>
<li>module configuration: create/change configurations and write/read them to/from an ADC. </li>
</ul>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga1e33b83bfcf4433eb2e8c6e818b5dff8"></a><!-- doxytag: member="adc.h::ADC_CH0" ref="ga1e33b83bfcf4433eb2e8c6e818b5dff8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_CH0&nbsp;&nbsp;&nbsp;(1U &lt;&lt; 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ADC channel 0. </p>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00158">158</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>Referenced by <a class="el" href="asf__adc__example__interrupt_8c_source.html#l00016">main()</a>.</p>

</div>
</div>
<a class="anchor" id="ga93782dc0962492f0720f7c696d30dd89"></a><!-- doxytag: member="adc.h::adc_get_compare_value" ref="ga93782dc0962492f0720f7c696d30dd89" args="(adc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define adc_get_compare_value</td>
          <td>(</td>
          <td class="paramtype">adc&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((adc)-&gt;CMP)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get compare value directly from ADC. </p>
<p>Gets the compare value directly from the ADC, for quick access while the ADC is enabled.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>adc</em>&nbsp;</td><td>Pointer to ADC module.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Current compare value of the ADC. Signedness does not matter.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This macro does not protect the 16-bit read from interrupts. If an interrupt may do a 16-bit read or write to the ADC while this macro is executing, interrupts <em>must</em> be temporarily disabled to avoid corruption of the read. </dd></dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00416">416</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga4323c7b62348e69cba70801b5037a023"></a><!-- doxytag: member="adc.h::adc_get_config_compare_value" ref="ga4323c7b62348e69cba70801b5037a023" args="(conf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define adc_get_config_compare_value</td>
          <td>(</td>
          <td class="paramtype">conf&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(conf-&gt;cmp)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get ADC compare value from configuration. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>Pointer to ADC module configuration. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00727">727</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga8a4cf01db45542b2826c59a1f45517d9"></a><!-- doxytag: member="adc.h::ADC_INT_BANDGAP" ref="ga8a4cf01db45542b2826c59a1f45517d9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_INT_BANDGAP&nbsp;&nbsp;&nbsp;ADC_BANDGAP_bm</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Bandgap reference. </p>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00172">172</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaaa76597541bd696349e98ad44a789b62"></a><!-- doxytag: member="adc.h::ADC_INT_TEMPSENSE" ref="gaaa76597541bd696349e98ad44a789b62" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_INT_TEMPSENSE&nbsp;&nbsp;&nbsp;ADC_TEMPREF_bm</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Temperature sensor. </p>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00171">171</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga45b4f6e5370958415e9d86a6c3ec8961"></a><!-- doxytag: member="adc.h::adc_set_compare_value" ref="ga45b4f6e5370958415e9d86a6c3ec8961" args="(adc, val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define adc_set_compare_value</td>
          <td>(</td>
          <td class="paramtype">adc, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">val&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                   \
                <a class="code" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613" title="Type used for holding state of interrupt flag.">irqflags_t</a> <a class="code" href="tpaste_8h.html#afd3b4e313492a0862292dc3072d8e347">ATPASTE2</a>(adc_flags, __LINE__) =  <a class="code" href="group__interrupt__group.html#ga5992cb015c55a0f4ed563e66a8793771" title="Get and clear the global interrupt flags.">cpu_irq_save</a>();    \
                (adc)-&gt;CMP = val;                                              \
                <a class="code" href="group__interrupt__group.html#ga428178bc346431936fddf52ad1ebd6fa" title="Restore global interrupt flags.">cpu_irq_restore</a>(<a class="code" href="tpaste_8h.html#afd3b4e313492a0862292dc3072d8e347">ATPASTE2</a>(adc_flags, __LINE__));                \
        } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Set compare value directly to ADC. </p>
<p>Sets the compare value directly to the ADC, for quick access while the ADC is enabled.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>adc</em>&nbsp;</td><td>Pointer to ADC module. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>Compare value to set, either signed or unsigned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The ADC must be enabled for this function to have any effect. </dd></dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00394">394</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac34bf511fa31e6a4acf7177a5c241d1c"></a><!-- doxytag: member="adc.h::adc_set_config_compare_value" ref="gac34bf511fa31e6a4acf7177a5c241d1c" args="(conf, val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define adc_set_config_compare_value</td>
          <td>(</td>
          <td class="paramtype">conf, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">val&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                       \
                conf-&gt;cmp = (uint16_t)val;         \
        } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Set ADC compare value in configuration. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>Pointer to ADC module configuration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>Compare value to set. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00717">717</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga38d4aaf5ee11df29de48c8cf9e9cd5a6"></a><!-- doxytag: member="adc.h::ADCACAL0" ref="ga38d4aaf5ee11df29de48c8cf9e9cd5a6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADCACAL0&nbsp;&nbsp;&nbsp;offsetof(NVM_PROD_SIGNATURES_t, ADCACAL0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ADC A, calibration byte 0. </p>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00129">129</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>Referenced by <a class="el" href="adc_8h_source.html#l00463">adc_get_calibration_data()</a>.</p>

</div>
</div>
<a class="anchor" id="ga62dd16cd9477462a07261fc3b09c03cf"></a><!-- doxytag: member="adc.h::ADCACAL1" ref="ga62dd16cd9477462a07261fc3b09c03cf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADCACAL1&nbsp;&nbsp;&nbsp;offsetof(NVM_PROD_SIGNATURES_t, ADCACAL1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ADC A, calibration byte 1. </p>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00131">131</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>Referenced by <a class="el" href="adc_8h_source.html#l00463">adc_get_calibration_data()</a>.</p>

</div>
</div>
<a class="anchor" id="gab232646c63dfd62eccee7babfb23da5d"></a><!-- doxytag: member="adc.h::ADCBCAL0" ref="gab232646c63dfd62eccee7babfb23da5d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADCBCAL0&nbsp;&nbsp;&nbsp;offsetof(NVM_PROD_SIGNATURES_t, ADCBCAL0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ADC B, calibration byte 0. </p>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00133">133</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>Referenced by <a class="el" href="adc_8h_source.html#l00463">adc_get_calibration_data()</a>.</p>

</div>
</div>
<a class="anchor" id="ga852d973507f35a5794118767601b539d"></a><!-- doxytag: member="adc.h::ADCBCAL1" ref="ga852d973507f35a5794118767601b539d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADCBCAL1&nbsp;&nbsp;&nbsp;offsetof(NVM_PROD_SIGNATURES_t, ADCBCAL1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ADC B, calibration byte 1. </p>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00135">135</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>Referenced by <a class="el" href="adc_8h_source.html#l00463">adc_get_calibration_data()</a>.</p>

</div>
</div>
<a class="anchor" id="ga24cbfb6d0871a0e63e9381f6f6410900"></a><!-- doxytag: member="adc.h::TEMPSENSE0" ref="ga24cbfb6d0871a0e63e9381f6f6410900" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEMPSENSE0&nbsp;&nbsp;&nbsp;offsetof(NVM_PROD_SIGNATURES_t, TEMPSENSE0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Temperature sensor calibration byte 0. </p>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00137">137</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>Referenced by <a class="el" href="adc_8h_source.html#l00463">adc_get_calibration_data()</a>.</p>

</div>
</div>
<a class="anchor" id="gacd3e183ef514af5ada84371df2867889"></a><!-- doxytag: member="adc.h::TEMPSENSE1" ref="gacd3e183ef514af5ada84371df2867889" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEMPSENSE1&nbsp;&nbsp;&nbsp;offsetof(NVM_PROD_SIGNATURES_t, TEMPSENSE1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Temperature sensor calibration byte 1. </p>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00139">139</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>Referenced by <a class="el" href="adc_8h_source.html#l00463">adc_get_calibration_data()</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ga341fbc7d7b20fbdd523b937836ca9c3e"></a><!-- doxytag: member="adc.h::adc_calibration_data" ref="ga341fbc7d7b20fbdd523b937836ca9c3e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__adc__module__group.html#ga341fbc7d7b20fbdd523b937836ca9c3e">adc_calibration_data</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ADC calibration data. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga341fbc7d7b20fbdd523b937836ca9c3ead6272ef64cbf9632a057fae33c406d47"></a><!-- doxytag: member="ADC_CAL_ADCA" ref="gga341fbc7d7b20fbdd523b937836ca9c3ead6272ef64cbf9632a057fae33c406d47" args="" -->ADC_CAL_ADCA</em>&nbsp;</td><td>
<p>ADC A pipeline calibration data. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga341fbc7d7b20fbdd523b937836ca9c3ea3ea17195c94dafe12ac91bba4e73556d"></a><!-- doxytag: member="ADC_CAL_ADCB" ref="gga341fbc7d7b20fbdd523b937836ca9c3ea3ea17195c94dafe12ac91bba4e73556d" args="" -->ADC_CAL_ADCB</em>&nbsp;</td><td>
<p>ADC B pipeline calibration data. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga341fbc7d7b20fbdd523b937836ca9c3eaca159f3820a9b128f30654ba8da3c468"></a><!-- doxytag: member="ADC_CAL_TEMPSENSE" ref="gga341fbc7d7b20fbdd523b937836ca9c3eaca159f3820a9b128f30654ba8da3c468" args="" -->ADC_CAL_TEMPSENSE</em>&nbsp;</td><td>
<p>Temperature sensor calibration data. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>12-bit unsigned, measured at 85 degrees Celsius, equivalent to 358.15 kelvin. </dd></dl>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00144">144</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00144"></a>00144                           {
<a name="l00145"></a>00145         <a class="code" href="group__adc__module__group.html#gga341fbc7d7b20fbdd523b937836ca9c3ead6272ef64cbf9632a057fae33c406d47" title="ADC A pipeline calibration data.">ADC_CAL_ADCA</a>,    
<a name="l00146"></a>00146         <a class="code" href="group__adc__module__group.html#gga341fbc7d7b20fbdd523b937836ca9c3ea3ea17195c94dafe12ac91bba4e73556d" title="ADC B pipeline calibration data.">ADC_CAL_ADCB</a>,    
<a name="l00147"></a>00147 
<a name="l00152"></a>00152         <a class="code" href="group__adc__module__group.html#gga341fbc7d7b20fbdd523b937836ca9c3eaca159f3820a9b128f30654ba8da3c468" title="Temperature sensor calibration data.">ADC_CAL_TEMPSENSE</a>,
<a name="l00153"></a>00153 };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga91b0f997d73739cf9f7349b7581e1f56"></a><!-- doxytag: member="adc.h::adc_reference" ref="ga91b0f997d73739cf9f7349b7581e1f56" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__adc__module__group.html#ga91b0f997d73739cf9f7349b7581e1f56">adc_reference</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ADC reference settings. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga91b0f997d73739cf9f7349b7581e1f56aa0d7c4771b18379ba0035a34efe6836c"></a><!-- doxytag: member="ADC_REF_BANDGAP" ref="gga91b0f997d73739cf9f7349b7581e1f56aa0d7c4771b18379ba0035a34efe6836c" args="" -->ADC_REF_BANDGAP</em>&nbsp;</td><td>
<p>Internal 1 V from bandgap reference. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga91b0f997d73739cf9f7349b7581e1f56a981e046382f20706a40b28d9e07917d4"></a><!-- doxytag: member="ADC_REF_VCC" ref="gga91b0f997d73739cf9f7349b7581e1f56a981e046382f20706a40b28d9e07917d4" args="" -->ADC_REF_VCC</em>&nbsp;</td><td>
<p>VCC divided by 1.6. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga91b0f997d73739cf9f7349b7581e1f56a427fce812ad2aaf752856514d13285da"></a><!-- doxytag: member="ADC_REF_AREFA" ref="gga91b0f997d73739cf9f7349b7581e1f56a427fce812ad2aaf752856514d13285da" args="" -->ADC_REF_AREFA</em>&nbsp;</td><td>
<p>External reference on AREFA pin. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga91b0f997d73739cf9f7349b7581e1f56a83d1f62e8c9e2e2a199463bf2638bc33"></a><!-- doxytag: member="ADC_REF_AREFB" ref="gga91b0f997d73739cf9f7349b7581e1f56a83d1f62e8c9e2e2a199463bf2638bc33" args="" -->ADC_REF_AREFB</em>&nbsp;</td><td>
<p>External reference on AREFB pin. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00228">228</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00228"></a>00228                    {
<a name="l00230"></a>00230         <a class="code" href="group__adc__module__group.html#gga91b0f997d73739cf9f7349b7581e1f56aa0d7c4771b18379ba0035a34efe6836c" title="Internal 1 V from bandgap reference.">ADC_REF_BANDGAP</a> = ADC_REFSEL_INT1V_gc,
<a name="l00232"></a>00232         <a class="code" href="group__adc__module__group.html#gga91b0f997d73739cf9f7349b7581e1f56a981e046382f20706a40b28d9e07917d4" title="VCC divided by 1.6.">ADC_REF_VCC</a>     = ADC_REFSEL_VCC_gc,
<a name="l00234"></a>00234         <a class="code" href="group__adc__module__group.html#gga91b0f997d73739cf9f7349b7581e1f56a427fce812ad2aaf752856514d13285da" title="External reference on AREFA pin.">ADC_REF_AREFA</a>   = ADC_REFSEL_AREFA_gc,
<a name="l00236"></a>00236         <a class="code" href="group__adc__module__group.html#gga91b0f997d73739cf9f7349b7581e1f56a83d1f62e8c9e2e2a199463bf2638bc33" title="External reference on AREFB pin.">ADC_REF_AREFB</a>   = ADC_REFSEL_AREFB_gc,
<a name="l00237"></a>00237 };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga14f1a9a4dda5ef84b87ca7a76b0c91b6"></a><!-- doxytag: member="adc.h::adc_resolution" ref="ga14f1a9a4dda5ef84b87ca7a76b0c91b6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__adc__module__group.html#ga14f1a9a4dda5ef84b87ca7a76b0c91b6">adc_resolution</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ADC resolution settings. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga14f1a9a4dda5ef84b87ca7a76b0c91b6aa6ba55441d34264812d9ef4bfd0e226b"></a><!-- doxytag: member="ADC_RES_8" ref="gga14f1a9a4dda5ef84b87ca7a76b0c91b6aa6ba55441d34264812d9ef4bfd0e226b" args="" -->ADC_RES_8</em>&nbsp;</td><td>
<p>8-bit resolution, right-adjusted. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga14f1a9a4dda5ef84b87ca7a76b0c91b6aea210513f386e09439ece14526c5f07d"></a><!-- doxytag: member="ADC_RES_12" ref="gga14f1a9a4dda5ef84b87ca7a76b0c91b6aea210513f386e09439ece14526c5f07d" args="" -->ADC_RES_12</em>&nbsp;</td><td>
<p>12-bit resolution, right-adjusted. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga14f1a9a4dda5ef84b87ca7a76b0c91b6adfc6472960a68c40f5014abd43280975"></a><!-- doxytag: member="ADC_RES_12_LEFT" ref="gga14f1a9a4dda5ef84b87ca7a76b0c91b6adfc6472960a68c40f5014abd43280975" args="" -->ADC_RES_12_LEFT</em>&nbsp;</td><td>
<p>12-bit resolution, left-adjusted. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00218">218</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00218"></a>00218                     {
<a name="l00220"></a>00220         <a class="code" href="group__adc__module__group.html#gga14f1a9a4dda5ef84b87ca7a76b0c91b6aa6ba55441d34264812d9ef4bfd0e226b" title="8-bit resolution, right-adjusted.">ADC_RES_8</a>       = ADC_RESOLUTION_8BIT_gc,
<a name="l00222"></a>00222         <a class="code" href="group__adc__module__group.html#gga14f1a9a4dda5ef84b87ca7a76b0c91b6aea210513f386e09439ece14526c5f07d" title="12-bit resolution, right-adjusted.">ADC_RES_12</a>      = ADC_RESOLUTION_12BIT_gc,
<a name="l00224"></a>00224         <a class="code" href="group__adc__module__group.html#gga14f1a9a4dda5ef84b87ca7a76b0c91b6adfc6472960a68c40f5014abd43280975" title="12-bit resolution, left-adjusted.">ADC_RES_12_LEFT</a> = ADC_RESOLUTION_LEFT12BIT_gc,
<a name="l00225"></a>00225 };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga9782331e138d6a97f4b50ed03d983e2e"></a><!-- doxytag: member="adc.h::adc_sign" ref="ga9782331e138d6a97f4b50ed03d983e2e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__adc__module__group.html#ga9782331e138d6a97f4b50ed03d983e2e">adc_sign</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ADC signedness settings. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga9782331e138d6a97f4b50ed03d983e2ea67fe5b6edafcfa3808a6fcbb7dd127d1"></a><!-- doxytag: member="ADC_SIGN_OFF" ref="gga9782331e138d6a97f4b50ed03d983e2ea67fe5b6edafcfa3808a6fcbb7dd127d1" args="" -->ADC_SIGN_OFF</em>&nbsp;</td><td>
<p>Unsigned conversions. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga9782331e138d6a97f4b50ed03d983e2ea245f8ab6f5f4120e59a77b29b5f169e3"></a><!-- doxytag: member="ADC_SIGN_ON" ref="gga9782331e138d6a97f4b50ed03d983e2ea245f8ab6f5f4120e59a77b29b5f169e3" args="" -->ADC_SIGN_ON</em>&nbsp;</td><td>
<p>Signed conversions. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00212">212</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00212"></a>00212               {
<a name="l00213"></a>00213         <a class="code" href="group__adc__module__group.html#gga9782331e138d6a97f4b50ed03d983e2ea67fe5b6edafcfa3808a6fcbb7dd127d1" title="Unsigned conversions.">ADC_SIGN_OFF</a>,                    
<a name="l00214"></a>00214         <a class="code" href="group__adc__module__group.html#gga9782331e138d6a97f4b50ed03d983e2ea245f8ab6f5f4120e59a77b29b5f169e3" title="Signed conversions.">ADC_SIGN_ON</a> = ADC_CONMODE_bm,    
<a name="l00215"></a>00215 };
</pre></div></p>

</div>
</div>
<a class="anchor" id="gadac5df7f2a1fa6df2915490437034183"></a><!-- doxytag: member="adc.h::adc_trigger" ref="gadac5df7f2a1fa6df2915490437034183" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__adc__module__group.html#gadac5df7f2a1fa6df2915490437034183">adc_trigger</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ADC conversion trigger settings. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>The choice in conversion triggers varies between device families. Refer to the device manual for detailed information. </dd></dl>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggadac5df7f2a1fa6df2915490437034183a3cfd949e9ec31e2cc42eec32e8f7bb7d"></a><!-- doxytag: member="ADC_TRIG_MANUAL" ref="ggadac5df7f2a1fa6df2915490437034183a3cfd949e9ec31e2cc42eec32e8f7bb7d" args="" -->ADC_TRIG_MANUAL</em>&nbsp;</td><td>
<p>Manually triggered conversions. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggadac5df7f2a1fa6df2915490437034183a3581b09e96b8fd911d581096e0700893"></a><!-- doxytag: member="ADC_TRIG_FREERUN_SWEEP" ref="ggadac5df7f2a1fa6df2915490437034183a3581b09e96b8fd911d581096e0700893" args="" -->ADC_TRIG_FREERUN_SWEEP</em>&nbsp;</td><td>
<p>Freerunning conversion sweeps. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>These will start as soon as the ADC is enabled. </dd></dl>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggadac5df7f2a1fa6df2915490437034183a31ff7d5ee36cfe5a3d3ff75a2852cdbb"></a><!-- doxytag: member="ADC_TRIG_EVENT_SINGLE" ref="ggadac5df7f2a1fa6df2915490437034183a31ff7d5ee36cfe5a3d3ff75a2852cdbb" args="" -->ADC_TRIG_EVENT_SINGLE</em>&nbsp;</td><td>
<p>Event-triggered conversions on individual channels Pairs each event channel with an ADC channel. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>The maximum base event channel that can be used is determined by the number of channels to trigger conversions on. </dd></dl>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00182">182</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00182"></a>00182                  {
<a name="l00184"></a>00184         <a class="code" href="group__adc__module__group.html#ggadac5df7f2a1fa6df2915490437034183a3cfd949e9ec31e2cc42eec32e8f7bb7d" title="Manually triggered conversions.">ADC_TRIG_MANUAL</a>,
<a name="l00189"></a>00189         <a class="code" href="group__adc__module__group.html#ggadac5df7f2a1fa6df2915490437034183a3581b09e96b8fd911d581096e0700893" title="Freerunning conversion sweeps.">ADC_TRIG_FREERUN_SWEEP</a>,
<a name="l00196"></a>00196         <a class="code" href="group__adc__module__group.html#ggadac5df7f2a1fa6df2915490437034183a31ff7d5ee36cfe5a3d3ff75a2852cdbb" title="Event-triggered conversions on individual channels Pairs each event channel with...">ADC_TRIG_EVENT_SINGLE</a>,
<a name="l00197"></a>00197 <span class="preprocessor">#if XMEGA_A</span>
<a name="l00198"></a>00198 <span class="preprocessor"></span>
<a name="l00202"></a>00202         ADC_TRIG_EVENT_SWEEP,
<a name="l00207"></a>00207         ADC_TRIG_EVENT_SYNCSWEEP,
<a name="l00208"></a>00208 <span class="preprocessor">#endif</span>
<a name="l00209"></a>00209 <span class="preprocessor"></span>};
</pre></div></p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gad78eaa438cdc1d451052cd01dd022cd5"></a><!-- doxytag: member="adc.h::adc_clear_interrupt_flag" ref="gad78eaa438cdc1d451052cd01dd022cd5" args="(ADC_t *adc, uint8_t ch_mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void adc_clear_interrupt_flag </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&nbsp;</td>
          <td class="paramname"> <em>adc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>ch_mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Clear interrupt flag of ADC channel(s). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>adc</em>&nbsp;</td><td>Pointer to ADC module. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ch_mask</em>&nbsp;</td><td>Mask of ADC channel(s): </p>
<ul>
<li><code>ADC_CHn</code> , where <code>n</code> specifies the channel. (These can be OR'ed together.)</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The ADC must be enabled for this function to have any effect. </dd></dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00342">342</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>Referenced by <a class="el" href="adc_8h_source.html#l00359">adc_wait_for_interrupt_flag()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00343"></a>00343 {
<a name="l00344"></a>00344         adc-&gt;INTFLAGS = ch_mask &lt;&lt; ADC_CH0IF_bp;
<a name="l00345"></a>00345 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga5bfe255d589e390363417fa6081252ed"></a><!-- doxytag: member="adc.h::adc_disable" ref="ga5bfe255d589e390363417fa6081252ed" args="(ADC_t *adc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc_disable </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&nbsp;</td>
          <td class="paramname"> <em>adc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disable ADC. </p>
<p>Disables the ADC and unlocks IDLE mode for the sleep manager.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>adc</em>&nbsp;</td><td>Pointer to ADC module </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8c_source.html#l00296">296</a> of file <a class="el" href="adc_8c_source.html">adc.c</a>.</p>

<p>References <a class="el" href="adc_8c_source.html#l00244">adc_disable_clock()</a>, <a class="el" href="interrupt__avr8_8h_source.html#l00098">cpu_irq_restore()</a>, <a class="el" href="interrupt__avr8_8h_source.html#l00091">cpu_irq_save()</a>, <a class="el" href="xmega_2sleepmgr_8h_source.html#l00057">SLEEPMGR_IDLE</a>, and <a class="el" href="sleepmgr_8h_source.html#l00149">sleepmgr_unlock_mode()</a>.</p>

<p>Referenced by <a class="el" href="asf__adc__example__interrupt_8c_source.html#l00110">adc_ch3_callback()</a>, and <a class="el" href="asf__adc__example__interrupt_8c_source.html#l00016">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00297"></a>00297 {
<a name="l00298"></a>00298         <a class="code" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613" title="Type used for holding state of interrupt flag.">irqflags_t</a> flags = <a class="code" href="group__interrupt__group.html#ga5992cb015c55a0f4ed563e66a8793771" title="Get and clear the global interrupt flags.">cpu_irq_save</a>();
<a name="l00299"></a>00299         adc-&gt;CTRLA &amp;= ~ADC_ENABLE_bm;
<a name="l00300"></a>00300         <a class="code" href="adc_8c.html#ab6136d2c6d0aaeb2a6eebc57ca976d55" title="Disable peripheral clock for ADC.">adc_disable_clock</a>(adc);
<a name="l00301"></a>00301         <a class="code" href="group__interrupt__group.html#ga428178bc346431936fddf52ad1ebd6fa" title="Restore global interrupt flags.">cpu_irq_restore</a>(flags);
<a name="l00302"></a>00302 
<a name="l00303"></a>00303         <a class="code" href="group__sleepmgr__group.html#ga0c3c8087f46b2332f8a274c6651afe3f" title="Decrease lock count for a sleep mode.">sleepmgr_unlock_mode</a>(<a class="code" href="group__sleepmgr__group.html#ggaa990bc3ea16fcad09009cdc70dbc38c6ae4f3742b3532d5ebabef6f26fabf4487" title="Idle mode.">SLEEPMGR_IDLE</a>);
<a name="l00304"></a>00304 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__adc__module__group_ga5bfe255d589e390363417fa6081252ed_cgraph.png" border="0" usemap="#group__adc__module__group_ga5bfe255d589e390363417fa6081252ed_cgraph_map" alt=""></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="gac8e249046e5da4bbdc560008f5f90a60"></a><!-- doxytag: member="adc.h::adc_disable_internal_input" ref="gac8e249046e5da4bbdc560008f5f90a60" args="(struct adc_config *conf, uint8_t int_inp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void adc_disable_internal_input </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structadc__config.html">adc_config</a> *&nbsp;</td>
          <td class="paramname"> <em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>int_inp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disable internal ADC input. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>Pointer to ADC module configuration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>int_inp</em>&nbsp;</td><td>Internal input to disable: </p>
<ul>
<li><code>ADC_INT_TEMPSENSE</code> for temperature sensor. </li>
<li><code>ADC_INT_BANDGAP</code> for bandgap reference. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00705">705</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>References <a class="el" href="adc_8h_source.html#l00115">adc_config::refctrl</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00707"></a>00707 {
<a name="l00708"></a>00708         conf-&gt;<a class="code" href="structadc__config.html#a0c240762542e8be71150e1faac99815f">refctrl</a> &amp;= ~int_inp;
<a name="l00709"></a>00709 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga2072427727c963ff84c0f17021d05cbb"></a><!-- doxytag: member="adc.h::adc_enable" ref="ga2072427727c963ff84c0f17021d05cbb" args="(ADC_t *adc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc_enable </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&nbsp;</td>
          <td class="paramname"> <em>adc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable ADC. </p>
<p>Enables the ADC and locks IDLE mode for the sleep manager.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>adc</em>&nbsp;</td><td>Pointer to ADC module</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>After enabling the ADC, one dummy conversion should be done to allow for its common mode voltage to settle. </dd></dl>

<p>Definition at line <a class="el" href="adc_8c_source.html#l00279">279</a> of file <a class="el" href="adc_8c_source.html">adc.c</a>.</p>

<p>References <a class="el" href="adc_8c_source.html#l00209">adc_enable_clock()</a>, <a class="el" href="interrupt__avr8_8h_source.html#l00098">cpu_irq_restore()</a>, <a class="el" href="interrupt__avr8_8h_source.html#l00091">cpu_irq_save()</a>, <a class="el" href="xmega_2sleepmgr_8h_source.html#l00057">SLEEPMGR_IDLE</a>, and <a class="el" href="sleepmgr_8h_source.html#l00124">sleepmgr_lock_mode()</a>.</p>

<p>Referenced by <a class="el" href="asf__adc__example__interrupt_8c_source.html#l00016">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00280"></a>00280 {
<a name="l00281"></a>00281         <a class="code" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613" title="Type used for holding state of interrupt flag.">irqflags_t</a> flags = <a class="code" href="group__interrupt__group.html#ga5992cb015c55a0f4ed563e66a8793771" title="Get and clear the global interrupt flags.">cpu_irq_save</a>();
<a name="l00282"></a>00282         <a class="code" href="adc_8c.html#a1a794b599c54429a39d872b0bfd6550f" title="Enable peripheral clock for ADC.">adc_enable_clock</a>(adc);
<a name="l00283"></a>00283         adc-&gt;CTRLA |= ADC_ENABLE_bm;
<a name="l00284"></a>00284         <a class="code" href="group__interrupt__group.html#ga428178bc346431936fddf52ad1ebd6fa" title="Restore global interrupt flags.">cpu_irq_restore</a>(flags);
<a name="l00285"></a>00285 
<a name="l00286"></a>00286         <a class="code" href="group__sleepmgr__group.html#gac1a7002fd7879c57cc22ccab48be7114" title="Increase lock count for a sleep mode.">sleepmgr_lock_mode</a>(<a class="code" href="group__sleepmgr__group.html#ggaa990bc3ea16fcad09009cdc70dbc38c6ae4f3742b3532d5ebabef6f26fabf4487" title="Idle mode.">SLEEPMGR_IDLE</a>);
<a name="l00287"></a>00287 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__adc__module__group_ga2072427727c963ff84c0f17021d05cbb_cgraph.png" border="0" usemap="#group__adc__module__group_ga2072427727c963ff84c0f17021d05cbb_cgraph_map" alt=""></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga7150241e8a1e2168ba7fcf14f1006061"></a><!-- doxytag: member="adc.h::adc_enable_internal_input" ref="ga7150241e8a1e2168ba7fcf14f1006061" args="(struct adc_config *conf, uint8_t int_inp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void adc_enable_internal_input </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structadc__config.html">adc_config</a> *&nbsp;</td>
          <td class="paramname"> <em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>int_inp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable internal ADC input. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>Pointer to ADC module configuration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>int_inp</em>&nbsp;</td><td>Internal input to enable: </p>
<ul>
<li><code>ADC_INT_TEMPSENSE</code> for temperature sensor. </li>
<li><code>ADC_INT_BANDGAP</code> for bandgap reference. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00691">691</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>References <a class="el" href="adc_8h_source.html#l00115">adc_config::refctrl</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00693"></a>00693 {
<a name="l00694"></a>00694         conf-&gt;<a class="code" href="structadc__config.html#a0c240762542e8be71150e1faac99815f">refctrl</a> |= int_inp;
<a name="l00695"></a>00695 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga61058c089475447263f4a3efbba9664a"></a><!-- doxytag: member="adc.h::adc_flush" ref="ga61058c089475447263f4a3efbba9664a" args="(ADC_t *adc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void adc_flush </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&nbsp;</td>
          <td class="paramname"> <em>adc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flush the ADC. </p>
<p>Forces the ADC to abort any ongoing conversions and restart its clock on the next peripheral clock cycle. Pending conversions are started after the clock reset.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>adc</em>&nbsp;</td><td>Pointer to ADC module.</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The ADC must be enabled for this function to have any effect. </dd></dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00376">376</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>References <a class="el" href="interrupt__avr8_8h_source.html#l00098">cpu_irq_restore()</a>, and <a class="el" href="interrupt__avr8_8h_source.html#l00091">cpu_irq_save()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00377"></a>00377 {
<a name="l00378"></a>00378         <a class="code" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613" title="Type used for holding state of interrupt flag.">irqflags_t</a> flags = <a class="code" href="group__interrupt__group.html#ga5992cb015c55a0f4ed563e66a8793771" title="Get and clear the global interrupt flags.">cpu_irq_save</a>();
<a name="l00379"></a>00379         adc-&gt;CTRLA |= ADC_FLUSH_bm;
<a name="l00380"></a>00380         <a class="code" href="group__interrupt__group.html#ga428178bc346431936fddf52ad1ebd6fa" title="Restore global interrupt flags.">cpu_irq_restore</a>(flags);
<a name="l00381"></a>00381 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__adc__module__group_ga61058c089475447263f4a3efbba9664a_cgraph.png" border="0" usemap="#group__adc__module__group_ga61058c089475447263f4a3efbba9664a_cgraph_map" alt=""></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga7c481b96d51e71dfa50b84c785d1920d"></a><!-- doxytag: member="adc.h::adc_get_calibration_data" ref="ga7c481b96d51e71dfa50b84c785d1920d" args="(enum adc_calibration_data cal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint16_t adc_get_calibration_data </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__adc__module__group.html#ga341fbc7d7b20fbdd523b937836ca9c3e">adc_calibration_data</a>&nbsp;</td>
          <td class="paramname"> <em>cal</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get calibration data. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cal</em>&nbsp;</td><td>Identifier for calibration data to get. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00463">463</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>References <a class="el" href="adc_8h_source.html#l00145">ADC_CAL_ADCA</a>, <a class="el" href="adc_8h_source.html#l00146">ADC_CAL_ADCB</a>, <a class="el" href="adc_8h_source.html#l00152">ADC_CAL_TEMPSENSE</a>, <a class="el" href="adc_8h_source.html#l00129">ADCACAL0</a>, <a class="el" href="adc_8h_source.html#l00131">ADCACAL1</a>, <a class="el" href="adc_8h_source.html#l00133">ADCBCAL0</a>, <a class="el" href="adc_8h_source.html#l00135">ADCBCAL1</a>, <a class="el" href="compiler_8h_source.html#l00515">Assert</a>, <a class="el" href="nvm_8h_source.html#l00253">nvm_read_production_signature_row()</a>, <a class="el" href="adc_8h_source.html#l00137">TEMPSENSE0</a>, and <a class="el" href="adc_8h_source.html#l00139">TEMPSENSE1</a>.</p>

<p>Referenced by <a class="el" href="adc_8c_source.html#l00349">adc_write_configuration()</a>, and <a class="el" href="asf__adc__example__interrupt_8c_source.html#l00016">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00464"></a>00464 {
<a name="l00465"></a>00465         uint16_t data;
<a name="l00466"></a>00466 
<a name="l00467"></a>00467         <span class="keywordflow">switch</span> (cal) {
<a name="l00468"></a>00468 <span class="preprocessor">#ifdef ADCA</span>
<a name="l00469"></a>00469 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="group__adc__module__group.html#gga341fbc7d7b20fbdd523b937836ca9c3ead6272ef64cbf9632a057fae33c406d47" title="ADC A pipeline calibration data.">ADC_CAL_ADCA</a>:
<a name="l00470"></a>00470                 data = <a class="code" href="group__nvm__signature__group.html#ga7783c7879b1a56225758977675762dd3" title="Get offset of calibration bytes in the production signature row.">nvm_read_production_signature_row</a>(<a class="code" href="group__adc__module__group.html#ga62dd16cd9477462a07261fc3b09c03cf" title="ADC A, calibration byte 1.">ADCACAL1</a>);
<a name="l00471"></a>00471                 data &lt;&lt;= 8;
<a name="l00472"></a>00472                 data |= <a class="code" href="group__nvm__signature__group.html#ga7783c7879b1a56225758977675762dd3" title="Get offset of calibration bytes in the production signature row.">nvm_read_production_signature_row</a>(<a class="code" href="group__adc__module__group.html#ga38d4aaf5ee11df29de48c8cf9e9cd5a6" title="ADC A, calibration byte 0.">ADCACAL0</a>);
<a name="l00473"></a>00473                 <span class="keywordflow">break</span>;
<a name="l00474"></a>00474 <span class="preprocessor">#endif</span>
<a name="l00475"></a>00475 <span class="preprocessor"></span>
<a name="l00476"></a>00476 <span class="preprocessor">#ifdef ADCB</span>
<a name="l00477"></a>00477 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="group__adc__module__group.html#gga341fbc7d7b20fbdd523b937836ca9c3ea3ea17195c94dafe12ac91bba4e73556d" title="ADC B pipeline calibration data.">ADC_CAL_ADCB</a>:
<a name="l00478"></a>00478                 data = <a class="code" href="group__nvm__signature__group.html#ga7783c7879b1a56225758977675762dd3" title="Get offset of calibration bytes in the production signature row.">nvm_read_production_signature_row</a>(<a class="code" href="group__adc__module__group.html#ga852d973507f35a5794118767601b539d" title="ADC B, calibration byte 1.">ADCBCAL1</a>);
<a name="l00479"></a>00479                 data &lt;&lt;= 8;
<a name="l00480"></a>00480                 data |= <a class="code" href="group__nvm__signature__group.html#ga7783c7879b1a56225758977675762dd3" title="Get offset of calibration bytes in the production signature row.">nvm_read_production_signature_row</a>(<a class="code" href="group__adc__module__group.html#gab232646c63dfd62eccee7babfb23da5d" title="ADC B, calibration byte 0.">ADCBCAL0</a>);
<a name="l00481"></a>00481                 <span class="keywordflow">break</span>;
<a name="l00482"></a>00482 <span class="preprocessor">#endif</span>
<a name="l00483"></a>00483 <span class="preprocessor"></span>
<a name="l00484"></a>00484 <span class="preprocessor">#if defined(ADCA) || defined(ADCB)</span>
<a name="l00485"></a>00485 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="group__adc__module__group.html#gga341fbc7d7b20fbdd523b937836ca9c3eaca159f3820a9b128f30654ba8da3c468" title="Temperature sensor calibration data.">ADC_CAL_TEMPSENSE</a>:
<a name="l00486"></a>00486                 data = <a class="code" href="group__nvm__signature__group.html#ga7783c7879b1a56225758977675762dd3" title="Get offset of calibration bytes in the production signature row.">nvm_read_production_signature_row</a>(<a class="code" href="group__adc__module__group.html#gacd3e183ef514af5ada84371df2867889" title="Temperature sensor calibration byte 1.">TEMPSENSE1</a>);
<a name="l00487"></a>00487                 data &lt;&lt;= 8;
<a name="l00488"></a>00488                 data |= <a class="code" href="group__nvm__signature__group.html#ga7783c7879b1a56225758977675762dd3" title="Get offset of calibration bytes in the production signature row.">nvm_read_production_signature_row</a>(<a class="code" href="group__adc__module__group.html#ga24cbfb6d0871a0e63e9381f6f6410900" title="Temperature sensor calibration byte 0.">TEMPSENSE0</a>);
<a name="l00489"></a>00489                 <span class="keywordflow">break</span>;
<a name="l00490"></a>00490 <span class="preprocessor">#endif</span>
<a name="l00491"></a>00491 <span class="preprocessor"></span>
<a name="l00492"></a>00492         <span class="keywordflow">default</span>:
<a name="l00493"></a>00493                 <a class="code" href="compiler_8h.html#aab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(0);
<a name="l00494"></a>00494                 data = 0;
<a name="l00495"></a>00495         }
<a name="l00496"></a>00496 
<a name="l00497"></a>00497         <span class="keywordflow">return</span> data;
<a name="l00498"></a>00498 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__adc__module__group_ga7c481b96d51e71dfa50b84c785d1920d_cgraph.png" border="0" usemap="#group__adc__module__group_ga7c481b96d51e71dfa50b84c785d1920d_cgraph_map" alt=""></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga75e6395610cba973d9135f7ff528309d"></a><!-- doxytag: member="adc.h::adc_get_interrupt_flag" ref="ga75e6395610cba973d9135f7ff528309d" args="(ADC_t *adc, uint8_t ch_mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t adc_get_interrupt_flag </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&nbsp;</td>
          <td class="paramname"> <em>adc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>ch_mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get interrupt flag of ADC channel(s). </p>
<p>Returns the interrupt flag of the masked channels. The meaning of the interrupt flag depends on what mode the individual channels are in.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>adc</em>&nbsp;</td><td>Pointer to ADC module. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ch_mask</em>&nbsp;</td><td>Mask of ADC channel(s): </p>
<ul>
<li><code>ADC_CHn</code> , where <code>n</code> specifies the channel. (These can be OR'ed together.)</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Mask with interrupt flags. </dd></dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00327">327</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>Referenced by <a class="el" href="adc_8h_source.html#l00359">adc_wait_for_interrupt_flag()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00328"></a>00328 {
<a name="l00329"></a>00329         <span class="keywordflow">return</span> (adc-&gt;INTFLAGS &gt;&gt; ADC_CH0IF_bp) &amp; ch_mask;
<a name="l00330"></a>00330 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaadfed93060b6a55fdbd6abe294c0e67b"></a><!-- doxytag: member="adc.h::adc_get_signed_compare_value" ref="gaadfed93060b6a55fdbd6abe294c0e67b" args="(ADC_t *adc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int16_t adc_get_signed_compare_value </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&nbsp;</td>
          <td class="paramname"> <em>adc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get signed compare value directly from ADC. </p>
<p>Gets the signed compare value directly from the ADC, with interrupt protection of the 16-bit read, for quick access while the ADC is enabled.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>adc</em>&nbsp;</td><td>Pointer to ADC module. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00426">426</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>References <a class="el" href="interrupt__avr8_8h_source.html#l00098">cpu_irq_restore()</a>, and <a class="el" href="interrupt__avr8_8h_source.html#l00091">cpu_irq_save()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00427"></a>00427 {
<a name="l00428"></a>00428         int16_t val;
<a name="l00429"></a>00429         <a class="code" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613" title="Type used for holding state of interrupt flag.">irqflags_t</a> flags;
<a name="l00430"></a>00430 
<a name="l00431"></a>00431         flags = <a class="code" href="group__interrupt__group.html#ga5992cb015c55a0f4ed563e66a8793771" title="Get and clear the global interrupt flags.">cpu_irq_save</a>();
<a name="l00432"></a>00432         val = adc-&gt;CMP;
<a name="l00433"></a>00433         <a class="code" href="group__interrupt__group.html#ga428178bc346431936fddf52ad1ebd6fa" title="Restore global interrupt flags.">cpu_irq_restore</a>(flags);
<a name="l00434"></a>00434 
<a name="l00435"></a>00435         <span class="keywordflow">return</span> val;
<a name="l00436"></a>00436 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__adc__module__group_gaadfed93060b6a55fdbd6abe294c0e67b_cgraph.png" border="0" usemap="#group__adc__module__group_gaadfed93060b6a55fdbd6abe294c0e67b_cgraph_map" alt=""></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="gadf69c5a7b18b4d9ced9b954d297ca6d4"></a><!-- doxytag: member="adc.h::adc_get_unsigned_compare_value" ref="gadf69c5a7b18b4d9ced9b954d297ca6d4" args="(ADC_t *adc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint16_t adc_get_unsigned_compare_value </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&nbsp;</td>
          <td class="paramname"> <em>adc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get unsigned compare value directly from ADC. </p>
<p>Gets the unsigned compare value directly from the ADC, with interrupt protection of the 16-bit read, for quick access while the ADC is enabled.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>adc</em>&nbsp;</td><td>Pointer to ADC module. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00446">446</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>References <a class="el" href="interrupt__avr8_8h_source.html#l00098">cpu_irq_restore()</a>, and <a class="el" href="interrupt__avr8_8h_source.html#l00091">cpu_irq_save()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00447"></a>00447 {
<a name="l00448"></a>00448         uint16_t val;
<a name="l00449"></a>00449         <a class="code" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613" title="Type used for holding state of interrupt flag.">irqflags_t</a> flags;
<a name="l00450"></a>00450 
<a name="l00451"></a>00451         flags = <a class="code" href="group__interrupt__group.html#ga5992cb015c55a0f4ed563e66a8793771" title="Get and clear the global interrupt flags.">cpu_irq_save</a>();
<a name="l00452"></a>00452         val = adc-&gt;CMP;
<a name="l00453"></a>00453         <a class="code" href="group__interrupt__group.html#ga428178bc346431936fddf52ad1ebd6fa" title="Restore global interrupt flags.">cpu_irq_restore</a>(flags);
<a name="l00454"></a>00454 
<a name="l00455"></a>00455         <span class="keywordflow">return</span> val;
<a name="l00456"></a>00456 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__adc__module__group_gadf69c5a7b18b4d9ced9b954d297ca6d4_cgraph.png" border="0" usemap="#group__adc__module__group_gadf69c5a7b18b4d9ced9b954d297ca6d4_cgraph_map" alt=""></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga36bcc0b840eb43c7928afe617da86d83"></a><!-- doxytag: member="adc.h::adc_is_enabled" ref="ga36bcc0b840eb43c7928afe617da86d83" args="(ADC_t *adc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a> adc_is_enabled </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&nbsp;</td>
          <td class="paramname"> <em>adc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if the ADC is enabled. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>adc</em>&nbsp;</td><td>Pointer to ADC module.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>true</em>&nbsp;</td><td>if ADC is enabled. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>false</em>&nbsp;</td><td>if ADC is disabled. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8c_source.html#l00314">314</a> of file <a class="el" href="adc_8c_source.html">adc.c</a>.</p>

<p>References <a class="el" href="compiler_8h_source.html#l00515">Assert</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00315"></a>00315 {
<a name="l00316"></a>00316         <span class="comment">/* It is sufficient to return the state of the ADC enable counters</span>
<a name="l00317"></a>00317 <span class="comment">         * since all driver functions that change the counts are protected</span>
<a name="l00318"></a>00318 <span class="comment">         * against interrupts and only the enable/disable functions leave the</span>
<a name="l00319"></a>00319 <span class="comment">         * counts incremented/decremented upon return.</span>
<a name="l00320"></a>00320 <span class="comment">         */</span>
<a name="l00321"></a>00321 <span class="preprocessor">#ifdef ADCA</span>
<a name="l00322"></a>00322 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ((uintptr_t)adc == (uintptr_t)&amp;ADCA) {
<a name="l00323"></a>00323                 <span class="keywordflow">return</span> adca_enable_count;
<a name="l00324"></a>00324         } <span class="keywordflow">else</span>
<a name="l00325"></a>00325 <span class="preprocessor">#endif</span>
<a name="l00326"></a>00326 <span class="preprocessor"></span>
<a name="l00327"></a>00327 <span class="preprocessor">#ifdef ADCB</span>
<a name="l00328"></a>00328 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ((uintptr_t)adc == (uintptr_t)&amp;ADCB) {
<a name="l00329"></a>00329                 <span class="keywordflow">return</span> adcb_enable_count;
<a name="l00330"></a>00330         } <span class="keywordflow">else</span>
<a name="l00331"></a>00331 <span class="preprocessor">#endif</span>
<a name="l00332"></a>00332 <span class="preprocessor"></span>
<a name="l00333"></a>00333         {
<a name="l00334"></a>00334                 <a class="code" href="compiler_8h.html#aab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(0);
<a name="l00335"></a>00335                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00336"></a>00336         }
<a name="l00337"></a>00337 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gac9e66ca0b0044edf984d8c343dec1b6c"></a><!-- doxytag: member="adc.h::adc_read_configuration" ref="gac9e66ca0b0044edf984d8c343dec1b6c" args="(ADC_t *adc, struct adc_config *conf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc_read_configuration </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&nbsp;</td>
          <td class="paramname"> <em>adc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structadc__config.html">adc_config</a> *&nbsp;</td>
          <td class="paramname"> <em>conf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read configuration from ADC module. </p>
<p>Reads out the current configuration of the ADC module to the specified buffer.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>adc</em>&nbsp;</td><td>Pointer to ADC module. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>Pointer to ADC module configuration. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8c_source.html#l00405">405</a> of file <a class="el" href="adc_8c_source.html">adc.c</a>.</p>

<p>References <a class="el" href="adc_8c_source.html#l00244">adc_disable_clock()</a>, <a class="el" href="adc_8c_source.html#l00209">adc_enable_clock()</a>, <a class="el" href="adc_8h_source.html#l00118">adc_config::cmp</a>, <a class="el" href="interrupt__avr8_8h_source.html#l00098">cpu_irq_restore()</a>, <a class="el" href="interrupt__avr8_8h_source.html#l00091">cpu_irq_save()</a>, <a class="el" href="adc_8h_source.html#l00114">adc_config::ctrlb</a>, <a class="el" href="adc_8h_source.html#l00116">adc_config::evctrl</a>, <a class="el" href="adc_8h_source.html#l00117">adc_config::prescaler</a>, and <a class="el" href="adc_8h_source.html#l00115">adc_config::refctrl</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00406"></a>00406 {
<a name="l00407"></a>00407         <a class="code" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613" title="Type used for holding state of interrupt flag.">irqflags_t</a> flags = <a class="code" href="group__interrupt__group.html#ga5992cb015c55a0f4ed563e66a8793771" title="Get and clear the global interrupt flags.">cpu_irq_save</a>();
<a name="l00408"></a>00408 
<a name="l00409"></a>00409         <a class="code" href="adc_8c.html#a1a794b599c54429a39d872b0bfd6550f" title="Enable peripheral clock for ADC.">adc_enable_clock</a>(adc);
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 <span class="preprocessor">#if XMEGA_A</span>
<a name="l00412"></a>00412 <span class="preprocessor"></span>        conf-&gt;ctrla = adc-&gt;CTRLA &amp; ADC_DMASEL_gm;
<a name="l00413"></a>00413 <span class="preprocessor">#endif</span>
<a name="l00414"></a>00414 <span class="preprocessor"></span>
<a name="l00415"></a>00415         conf-&gt;<a class="code" href="structadc__config.html#a3c88ba588bfe8bffcee1e676c6a3f0ac">cmp</a> = adc-&gt;CMP;
<a name="l00416"></a>00416         conf-&gt;<a class="code" href="structadc__config.html#a0c240762542e8be71150e1faac99815f">refctrl</a> = adc-&gt;REFCTRL;
<a name="l00417"></a>00417         conf-&gt;<a class="code" href="structadc__config.html#a4d00211bb40193c0e204e21b8a1cca03">prescaler</a> = adc-&gt;PRESCALER;
<a name="l00418"></a>00418         conf-&gt;<a class="code" href="structadc__config.html#ae9df3c1266c0ed4562ec62c7d5aeddc3">evctrl</a> = adc-&gt;EVCTRL;
<a name="l00419"></a>00419         conf-&gt;<a class="code" href="structadc__config.html#adecd65e8a1d84a4467745879ebbb47dc">ctrlb</a> = adc-&gt;CTRLB;
<a name="l00420"></a>00420 
<a name="l00421"></a>00421         <a class="code" href="adc_8c.html#ab6136d2c6d0aaeb2a6eebc57ca976d55" title="Disable peripheral clock for ADC.">adc_disable_clock</a>(adc);
<a name="l00422"></a>00422 
<a name="l00423"></a>00423         <a class="code" href="group__interrupt__group.html#ga428178bc346431936fddf52ad1ebd6fa" title="Restore global interrupt flags.">cpu_irq_restore</a>(flags);
<a name="l00424"></a>00424 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__adc__module__group_gac9e66ca0b0044edf984d8c343dec1b6c_cgraph.png" border="0" usemap="#group__adc__module__group_gac9e66ca0b0044edf984d8c343dec1b6c_cgraph_map" alt=""></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga7c78a3ba0a8b13d02a1464ddf1f40586"></a><!-- doxytag: member="adc.h::adc_set_clock_rate" ref="ga7c78a3ba0a8b13d02a1464ddf1f40586" args="(struct adc_config *conf, uint32_t clk_adc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void adc_set_clock_rate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structadc__config.html">adc_config</a> *&nbsp;</td>
          <td class="paramname"> <em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>clk_adc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set ADC prescaler to get desired clock rate. </p>
<p>Sets the ADC prescaling so that its clock rate becomes _at most_ <em>clk_adc_hz</em>. This is done by computing the ratio of the peripheral clock rate to the desired ADC clock rate, and rounding it upward to the nearest prescaling factor.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>Pointer to ADC module configuration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clk_adc</em>&nbsp;</td><td>Desired ADC clock rate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The sample rate is not determined solely by the ADC clock rate for all devices. Refer to the device manual for detailed information on conversion timing. </dd></dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00523">523</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>References <a class="el" href="compiler_8h_source.html#l00515">Assert</a>, <a class="el" href="adc_8h_source.html#l00117">adc_config::prescaler</a>, and <a class="el" href="xmega_2sysclk_8h_source.html#l00293">sysclk_get_per_hz()</a>.</p>

<p>Referenced by <a class="el" href="asf__adc__example__interrupt_8c_source.html#l00016">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00524"></a>00524 {
<a name="l00525"></a>00525         uint32_t clk_per;
<a name="l00526"></a>00526         uint16_t ratio;
<a name="l00527"></a>00527         uint8_t  psc;
<a name="l00528"></a>00528 
<a name="l00529"></a>00529         <a class="code" href="compiler_8h.html#aab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(clk_adc);
<a name="l00530"></a>00530 <span class="preprocessor">#if XMEGA_A</span>
<a name="l00531"></a>00531 <span class="preprocessor"></span>        <a class="code" href="compiler_8h.html#aab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(clk_adc &lt;= 2000000UL);
<a name="l00532"></a>00532 <span class="preprocessor">#elif XMEGA_D</span>
<a name="l00533"></a>00533 <span class="preprocessor"></span>        <a class="code" href="compiler_8h.html#aab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(clk_adc &lt;= 1400000UL);
<a name="l00534"></a>00534 <span class="preprocessor">#endif</span>
<a name="l00535"></a>00535 <span class="preprocessor"></span>
<a name="l00536"></a>00536         clk_per = <a class="code" href="group__sysclk__group.html#gae1a556fa8d3fb23bf1a6359c38c7c24f" title="Return the current rate in Hz of clk_PER.">sysclk_get_per_hz</a>();
<a name="l00537"></a>00537         ratio = clk_per / clk_adc;
<a name="l00538"></a>00538 
<a name="l00539"></a>00539         <span class="comment">// Round ratio up to the nearest prescaling factor.</span>
<a name="l00540"></a>00540         <span class="keywordflow">if</span>(ratio &lt;= 4) {
<a name="l00541"></a>00541                 psc = ADC_PRESCALER_DIV4_gc;
<a name="l00542"></a>00542         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ratio &lt;= 8) {
<a name="l00543"></a>00543                 psc = ADC_PRESCALER_DIV8_gc;
<a name="l00544"></a>00544         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ratio &lt;= 16) {
<a name="l00545"></a>00545                 psc = ADC_PRESCALER_DIV16_gc;
<a name="l00546"></a>00546         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ratio &lt;= 32) {
<a name="l00547"></a>00547                 psc = ADC_PRESCALER_DIV32_gc;
<a name="l00548"></a>00548         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ratio &lt;= 64) {
<a name="l00549"></a>00549                 psc = ADC_PRESCALER_DIV64_gc;
<a name="l00550"></a>00550         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ratio &lt;= 128) {
<a name="l00551"></a>00551                 psc = ADC_PRESCALER_DIV128_gc;
<a name="l00552"></a>00552         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ratio &lt;= 256) {
<a name="l00553"></a>00553                 psc = ADC_PRESCALER_DIV256_gc;
<a name="l00554"></a>00554         } <span class="keywordflow">else</span> {
<a name="l00555"></a>00555                 psc = ADC_PRESCALER_DIV512_gc;
<a name="l00556"></a>00556         }
<a name="l00557"></a>00557 
<a name="l00558"></a>00558         conf-&gt;<a class="code" href="structadc__config.html#a4d00211bb40193c0e204e21b8a1cca03">prescaler</a> = psc;
<a name="l00559"></a>00559 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__adc__module__group_ga7c78a3ba0a8b13d02a1464ddf1f40586_cgraph.png" border="0" usemap="#group__adc__module__group_ga7c78a3ba0a8b13d02a1464ddf1f40586_cgraph_map" alt=""></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="gae74a2f676cac7feff9a38e6af6f899e2"></a><!-- doxytag: member="adc.h::adc_set_conversion_parameters" ref="gae74a2f676cac7feff9a38e6af6f899e2" args="(struct adc_config *conf, enum adc_sign sign, enum adc_resolution res, enum adc_reference ref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void adc_set_conversion_parameters </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structadc__config.html">adc_config</a> *&nbsp;</td>
          <td class="paramname"> <em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__adc__module__group.html#ga9782331e138d6a97f4b50ed03d983e2e">adc_sign</a>&nbsp;</td>
          <td class="paramname"> <em>sign</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__adc__module__group.html#ga14f1a9a4dda5ef84b87ca7a76b0c91b6">adc_resolution</a>&nbsp;</td>
          <td class="paramname"> <em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__adc__module__group.html#ga91b0f997d73739cf9f7349b7581e1f56">adc_reference</a>&nbsp;</td>
          <td class="paramname"> <em>ref</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set ADC conversion parameters. </p>
<p>Sets the signedness, resolution and voltage reference for conversions in the ADC module configuration.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>Pointer to ADC module configuration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sign</em>&nbsp;</td><td>Conversion signedness. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>res</em>&nbsp;</td><td>Resolution of conversions. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ref</em>&nbsp;</td><td>Voltage reference to use. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00572">572</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>References <a class="el" href="adc_8h_source.html#l00114">adc_config::ctrlb</a>, and <a class="el" href="adc_8h_source.html#l00115">adc_config::refctrl</a>.</p>

<p>Referenced by <a class="el" href="asf__adc__example__interrupt_8c_source.html#l00016">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00575"></a>00575 {
<a name="l00576"></a>00576         <span class="comment">// Preserve all but conversion and resolution config.</span>
<a name="l00577"></a>00577         conf-&gt;<a class="code" href="structadc__config.html#adecd65e8a1d84a4467745879ebbb47dc">ctrlb</a> &amp;= ~(ADC_CONMODE_bm | ADC_RESOLUTION_gm);
<a name="l00578"></a>00578         conf-&gt;<a class="code" href="structadc__config.html#adecd65e8a1d84a4467745879ebbb47dc">ctrlb</a> |= (uint8_t)res | (uint8_t)sign;
<a name="l00579"></a>00579 
<a name="l00580"></a>00580         conf-&gt;<a class="code" href="structadc__config.html#a0c240762542e8be71150e1faac99815f">refctrl</a> &amp;= ~ADC_REFSEL_gm;
<a name="l00581"></a>00581         conf-&gt;<a class="code" href="structadc__config.html#a0c240762542e8be71150e1faac99815f">refctrl</a> |= ref;
<a name="l00582"></a>00582 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga48ca852e202a1da855eb07d1c71c292d"></a><!-- doxytag: member="adc.h::adc_set_conversion_trigger" ref="ga48ca852e202a1da855eb07d1c71c292d" args="(struct adc_config *conf, enum adc_trigger trig, uint8_t nr_of_ch, uint8_t base_ev_ch)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void adc_set_conversion_trigger </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structadc__config.html">adc_config</a> *&nbsp;</td>
          <td class="paramname"> <em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__adc__module__group.html#gadac5df7f2a1fa6df2915490437034183">adc_trigger</a>&nbsp;</td>
          <td class="paramname"> <em>trig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>nr_of_ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>base_ev_ch</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set ADC conversion trigger. </p>
<p>Configures the conversion triggering of the ADC.</p>
<p>For automatic triggering modes, the number of channels to start conversions on must be specified with <em>nr_of_ch</em>. The channel selection for these modes is incrementally inclusive, always starting with channel 0.</p>
<p>For event triggered modes, the base event channel must also be specified with <em>base_ev_ch</em>. The event channels are assigned to the ADC channels in an incremental fashion <em>without</em> <em>wrap-around</em> (in single-trigger event mode). This means that the maximum base event channel that can be used is determined by the number of ADC channels to start conversions on, i.e., <em>nr_of_ch</em>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>Pointer to ADC module configuration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>trig</em>&nbsp;</td><td>Conversion trigger to set. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nr_of_ch</em>&nbsp;</td><td>Number of ADC channels to trigger conversions on: </p>
<ul>
<li><code>1</code> - <code>ADC_NR_OF_CHANNELS</code> (must be non-zero). </li>
</ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>base_ev_ch</em>&nbsp;</td><td>Base event channel, if used. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00605">605</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>References <a class="el" href="adc_8h_source.html#l00196">ADC_TRIG_EVENT_SINGLE</a>, <a class="el" href="adc_8h_source.html#l00189">ADC_TRIG_FREERUN_SWEEP</a>, <a class="el" href="adc_8h_source.html#l00184">ADC_TRIG_MANUAL</a>, <a class="el" href="compiler_8h_source.html#l00515">Assert</a>, <a class="el" href="adc_8h_source.html#l00114">adc_config::ctrlb</a>, and <a class="el" href="adc_8h_source.html#l00116">adc_config::evctrl</a>.</p>

<p>Referenced by <a class="el" href="asf__adc__example__interrupt_8c_source.html#l00110">adc_ch3_callback()</a>, and <a class="el" href="asf__adc__example__interrupt_8c_source.html#l00016">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00607"></a>00607 {
<a name="l00608"></a>00608         <a class="code" href="compiler_8h.html#aab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(nr_of_ch);
<a name="l00609"></a>00609         <a class="code" href="compiler_8h.html#aab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(nr_of_ch &lt;= ADC_NR_OF_CHANNELS);
<a name="l00610"></a>00610 <span class="preprocessor">#if XMEGA_A</span>
<a name="l00611"></a>00611 <span class="preprocessor"></span>        <a class="code" href="compiler_8h.html#aab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(base_ev_ch &lt;= 7);
<a name="l00612"></a>00612 <span class="preprocessor">#elif XMEGA_D</span>
<a name="l00613"></a>00613 <span class="preprocessor"></span>        <a class="code" href="compiler_8h.html#aab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(base_ev_ch &lt;= 3);
<a name="l00614"></a>00614 <span class="preprocessor">#endif</span>
<a name="l00615"></a>00615 <span class="preprocessor"></span>
<a name="l00616"></a>00616         <span class="keywordflow">switch</span> (trig) {
<a name="l00617"></a>00617         <span class="keywordflow">case</span> <a class="code" href="group__adc__module__group.html#ggadac5df7f2a1fa6df2915490437034183a3cfd949e9ec31e2cc42eec32e8f7bb7d" title="Manually triggered conversions.">ADC_TRIG_MANUAL</a>:
<a name="l00618"></a>00618                 conf-&gt;<a class="code" href="structadc__config.html#adecd65e8a1d84a4467745879ebbb47dc">ctrlb</a> &amp;= ~ADC_FREERUN_bm;
<a name="l00619"></a>00619                 conf-&gt;<a class="code" href="structadc__config.html#ae9df3c1266c0ed4562ec62c7d5aeddc3">evctrl</a> = ADC_EVACT_NONE_gc;
<a name="l00620"></a>00620                 <span class="keywordflow">break</span>;
<a name="l00621"></a>00621 
<a name="l00622"></a>00622         <span class="keywordflow">case</span> <a class="code" href="group__adc__module__group.html#ggadac5df7f2a1fa6df2915490437034183a3581b09e96b8fd911d581096e0700893" title="Freerunning conversion sweeps.">ADC_TRIG_FREERUN_SWEEP</a>:
<a name="l00623"></a>00623                 conf-&gt;<a class="code" href="structadc__config.html#adecd65e8a1d84a4467745879ebbb47dc">ctrlb</a> |= ADC_FREERUN_bm;
<a name="l00624"></a>00624                 conf-&gt;<a class="code" href="structadc__config.html#ae9df3c1266c0ed4562ec62c7d5aeddc3">evctrl</a> = (nr_of_ch - 1) &lt;&lt; ADC_SWEEP_gp;
<a name="l00625"></a>00625                 <span class="keywordflow">break</span>;
<a name="l00626"></a>00626 
<a name="l00627"></a>00627         <span class="keywordflow">case</span> <a class="code" href="group__adc__module__group.html#ggadac5df7f2a1fa6df2915490437034183a31ff7d5ee36cfe5a3d3ff75a2852cdbb" title="Event-triggered conversions on individual channels Pairs each event channel with...">ADC_TRIG_EVENT_SINGLE</a>:
<a name="l00628"></a>00628                 conf-&gt;<a class="code" href="structadc__config.html#adecd65e8a1d84a4467745879ebbb47dc">ctrlb</a> &amp;= ~ADC_FREERUN_bm;
<a name="l00629"></a>00629                 conf-&gt;<a class="code" href="structadc__config.html#ae9df3c1266c0ed4562ec62c7d5aeddc3">evctrl</a> = (base_ev_ch &lt;&lt; ADC_EVSEL_gp) |
<a name="l00630"></a>00630                                 (nr_of_ch &lt;&lt; ADC_EVACT_gp);
<a name="l00631"></a>00631                 <span class="keywordflow">break</span>;
<a name="l00632"></a>00632 
<a name="l00633"></a>00633 <span class="preprocessor">#if XMEGA_A</span>
<a name="l00634"></a>00634 <span class="preprocessor"></span>        <span class="keywordflow">case</span> ADC_TRIG_EVENT_SWEEP:
<a name="l00635"></a>00635                 conf-&gt;<a class="code" href="structadc__config.html#adecd65e8a1d84a4467745879ebbb47dc">ctrlb</a> &amp;= ~ADC_FREERUN_bm;
<a name="l00636"></a>00636                 conf-&gt;<a class="code" href="structadc__config.html#ae9df3c1266c0ed4562ec62c7d5aeddc3">evctrl</a> = (nr_of_ch - 1) &lt;&lt; ADC_SWEEP_gp |
<a name="l00637"></a>00637                                 (base_ev_ch &lt;&lt; ADC_EVSEL_gp) |
<a name="l00638"></a>00638                                 ADC_EVACT_SWEEP_gc;
<a name="l00639"></a>00639                 <span class="keywordflow">break</span>;
<a name="l00640"></a>00640 
<a name="l00641"></a>00641         <span class="keywordflow">case</span> ADC_TRIG_EVENT_SYNCSWEEP:
<a name="l00642"></a>00642                 conf-&gt;<a class="code" href="structadc__config.html#adecd65e8a1d84a4467745879ebbb47dc">ctrlb</a> &amp;= ~ADC_FREERUN_bm;
<a name="l00643"></a>00643                 conf-&gt;<a class="code" href="structadc__config.html#ae9df3c1266c0ed4562ec62c7d5aeddc3">evctrl</a> = ((nr_of_ch - 1) &lt;&lt; ADC_SWEEP_gp) |
<a name="l00644"></a>00644                                 (base_ev_ch &lt;&lt; ADC_EVSEL_gp) |
<a name="l00645"></a>00645                                 ADC_EVACT_SYNCHSWEEP_gc;
<a name="l00646"></a>00646                 <span class="keywordflow">break</span>;
<a name="l00647"></a>00647 <span class="preprocessor">#endif</span>
<a name="l00648"></a>00648 <span class="preprocessor"></span>
<a name="l00649"></a>00649         <span class="keywordflow">default</span>:
<a name="l00650"></a>00650                 <a class="code" href="compiler_8h.html#aab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(0);
<a name="l00651"></a>00651         }
<a name="l00652"></a>00652 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga7ebc3dec12aad3001799f3aa39b49f2a"></a><!-- doxytag: member="adc.h::adc_start_conversion" ref="ga7ebc3dec12aad3001799f3aa39b49f2a" args="(ADC_t *adc, uint8_t ch_mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void adc_start_conversion </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&nbsp;</td>
          <td class="paramname"> <em>adc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>ch_mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start one-shot conversion on ADC channel(s). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>adc</em>&nbsp;</td><td>Pointer to ADC module. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ch_mask</em>&nbsp;</td><td>Mask of ADC channel(s): </p>
<ul>
<li><code>ADC_CHn</code> , where <code>n</code> specifies the channel. (These can be OR'ed together.)</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The ADC must be enabled for this function to have any effect. </dd></dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00307">307</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>References <a class="el" href="interrupt__avr8_8h_source.html#l00098">cpu_irq_restore()</a>, and <a class="el" href="interrupt__avr8_8h_source.html#l00091">cpu_irq_save()</a>.</p>

<p>Referenced by <a class="el" href="asf__adc__example__interrupt_8c_source.html#l00016">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00308"></a>00308 {
<a name="l00309"></a>00309         <a class="code" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613" title="Type used for holding state of interrupt flag.">irqflags_t</a> flags = <a class="code" href="group__interrupt__group.html#ga5992cb015c55a0f4ed563e66a8793771" title="Get and clear the global interrupt flags.">cpu_irq_save</a>();
<a name="l00310"></a>00310         adc-&gt;CTRLA |= ch_mask &lt;&lt; ADC_CH0START_bp;
<a name="l00311"></a>00311         <a class="code" href="group__interrupt__group.html#ga428178bc346431936fddf52ad1ebd6fa" title="Restore global interrupt flags.">cpu_irq_restore</a>(flags);
<a name="l00312"></a>00312 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__adc__module__group_ga7ebc3dec12aad3001799f3aa39b49f2a_cgraph.png" border="0" usemap="#group__adc__module__group_ga7ebc3dec12aad3001799f3aa39b49f2a_cgraph_map" alt=""></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="gadfda8234be4fc01c1b4edfd870dff48a"></a><!-- doxytag: member="adc.h::adc_wait_for_interrupt_flag" ref="gadfda8234be4fc01c1b4edfd870dff48a" args="(ADC_t *adc, uint8_t ch_mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void adc_wait_for_interrupt_flag </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&nbsp;</td>
          <td class="paramname"> <em>adc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>ch_mask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait for interrupt flag of ADC channel(s). </p>
<p>Waits for the interrupt flag of the specified channel(s) to be set, then clears it before returning. If several channels are masked, the function will wait for <em>all</em> interrupt flags to be set.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>adc</em>&nbsp;</td><td>Pointer to ADC module. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ch_mask</em>&nbsp;</td><td>Mask of ADC channel(s): </p>
<ul>
<li><code>ADC_CHn</code> , where <code>n</code> specifies the channel. (These can be OR'ed together.) </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00359">359</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>

<p>References <a class="el" href="adc_8h_source.html#l00342">adc_clear_interrupt_flag()</a>, and <a class="el" href="adc_8h_source.html#l00327">adc_get_interrupt_flag()</a>.</p>

<p>Referenced by <a class="el" href="asf__adc__example__interrupt_8c_source.html#l00016">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00360"></a>00360 {
<a name="l00361"></a>00361         <span class="keywordflow">do</span> { } <span class="keywordflow">while</span> (<a class="code" href="group__adc__module__group.html#ga75e6395610cba973d9135f7ff528309d" title="Get interrupt flag of ADC channel(s).">adc_get_interrupt_flag</a>(adc, ch_mask) != ch_mask);
<a name="l00362"></a>00362         <a class="code" href="group__adc__module__group.html#gad78eaa438cdc1d451052cd01dd022cd5" title="Clear interrupt flag of ADC channel(s).">adc_clear_interrupt_flag</a>(adc, ch_mask);
<a name="l00363"></a>00363 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__adc__module__group_gadfda8234be4fc01c1b4edfd870dff48a_cgraph.png" border="0" usemap="#group__adc__module__group_gadfda8234be4fc01c1b4edfd870dff48a_cgraph_map" alt=""></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga617d7a4c8a2c60c0c44bc3602c48b7ef"></a><!-- doxytag: member="adc.h::adc_write_configuration" ref="ga617d7a4c8a2c60c0c44bc3602c48b7ef" args="(ADC_t *adc, const struct adc_config *conf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc_write_configuration </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&nbsp;</td>
          <td class="paramname"> <em>adc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structadc__config.html">adc_config</a> *&nbsp;</td>
          <td class="paramname"> <em>conf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write configuration to ADC module. </p>
<p>Disables the ADC and flushes its pipeline before writing the specified configuration and factory calibration value to it. If the ADC was enabled upon entry of the function, it is enabled upon function return.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>adc</em>&nbsp;</td><td>Pointer to ADC module. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>Pointer to ADC module configuration. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8c_source.html#l00349">349</a> of file <a class="el" href="adc_8c_source.html">adc.c</a>.</p>

<p>References <a class="el" href="adc_8h_source.html#l00145">ADC_CAL_ADCA</a>, <a class="el" href="adc_8h_source.html#l00146">ADC_CAL_ADCB</a>, <a class="el" href="adc_8c_source.html#l00244">adc_disable_clock()</a>, <a class="el" href="adc_8c_source.html#l00209">adc_enable_clock()</a>, <a class="el" href="adc_8h_source.html#l00463">adc_get_calibration_data()</a>, <a class="el" href="compiler_8h_source.html#l00515">Assert</a>, <a class="el" href="adc_8h_source.html#l00118">adc_config::cmp</a>, <a class="el" href="interrupt__avr8_8h_source.html#l00098">cpu_irq_restore()</a>, <a class="el" href="interrupt__avr8_8h_source.html#l00091">cpu_irq_save()</a>, <a class="el" href="adc_8h_source.html#l00114">adc_config::ctrlb</a>, <a class="el" href="adc_8h_source.html#l00116">adc_config::evctrl</a>, <a class="el" href="adc_8h_source.html#l00117">adc_config::prescaler</a>, and <a class="el" href="adc_8h_source.html#l00115">adc_config::refctrl</a>.</p>

<p>Referenced by <a class="el" href="asf__adc__example__interrupt_8c_source.html#l00110">adc_ch3_callback()</a>, and <a class="el" href="asf__adc__example__interrupt_8c_source.html#l00016">main()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00350"></a>00350 {
<a name="l00351"></a>00351         uint16_t cal;
<a name="l00352"></a>00352         uint8_t  enable;
<a name="l00353"></a>00353         <a class="code" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613" title="Type used for holding state of interrupt flag.">irqflags_t</a> flags;
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 <span class="preprocessor">#ifdef ADCA</span>
<a name="l00356"></a>00356 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ((uintptr_t)adc == (uintptr_t)&amp;ADCA) {
<a name="l00357"></a>00357                 cal = <a class="code" href="group__adc__module__group.html#ga7c481b96d51e71dfa50b84c785d1920d" title="Get calibration data.">adc_get_calibration_data</a>(<a class="code" href="group__adc__module__group.html#gga341fbc7d7b20fbdd523b937836ca9c3ead6272ef64cbf9632a057fae33c406d47" title="ADC A pipeline calibration data.">ADC_CAL_ADCA</a>);
<a name="l00358"></a>00358         } <span class="keywordflow">else</span>
<a name="l00359"></a>00359 <span class="preprocessor">#endif</span>
<a name="l00360"></a>00360 <span class="preprocessor"></span>
<a name="l00361"></a>00361 <span class="preprocessor">#ifdef ADCB</span>
<a name="l00362"></a>00362 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ((uintptr_t)adc == (uintptr_t)&amp;ADCB) {
<a name="l00363"></a>00363                 cal = <a class="code" href="group__adc__module__group.html#ga7c481b96d51e71dfa50b84c785d1920d" title="Get calibration data.">adc_get_calibration_data</a>(<a class="code" href="group__adc__module__group.html#gga341fbc7d7b20fbdd523b937836ca9c3ea3ea17195c94dafe12ac91bba4e73556d" title="ADC B pipeline calibration data.">ADC_CAL_ADCB</a>);
<a name="l00364"></a>00364         } <span class="keywordflow">else</span>
<a name="l00365"></a>00365 <span class="preprocessor">#endif</span>
<a name="l00366"></a>00366 <span class="preprocessor"></span>
<a name="l00367"></a>00367         {
<a name="l00368"></a>00368                 <a class="code" href="compiler_8h.html#aab1e54dcc40192f9704e8b252635450f" title="This macro is used to test fatal errors.">Assert</a>(0);
<a name="l00369"></a>00369                 <span class="keywordflow">return</span>;
<a name="l00370"></a>00370         }
<a name="l00371"></a>00371 
<a name="l00372"></a>00372         flags = <a class="code" href="group__interrupt__group.html#ga5992cb015c55a0f4ed563e66a8793771" title="Get and clear the global interrupt flags.">cpu_irq_save</a>();
<a name="l00373"></a>00373         <a class="code" href="adc_8c.html#a1a794b599c54429a39d872b0bfd6550f" title="Enable peripheral clock for ADC.">adc_enable_clock</a>(adc);
<a name="l00374"></a>00374 
<a name="l00375"></a>00375         enable = adc-&gt;CTRLA &amp; ADC_ENABLE_bm;
<a name="l00376"></a>00376 
<a name="l00377"></a>00377         adc-&gt;CTRLA = ADC_FLUSH_bm;
<a name="l00378"></a>00378         adc-&gt;CAL = cal;
<a name="l00379"></a>00379         adc-&gt;CMP = conf-&gt;<a class="code" href="structadc__config.html#a3c88ba588bfe8bffcee1e676c6a3f0ac">cmp</a>;
<a name="l00380"></a>00380         adc-&gt;REFCTRL = conf-&gt;<a class="code" href="structadc__config.html#a0c240762542e8be71150e1faac99815f">refctrl</a>;
<a name="l00381"></a>00381         adc-&gt;PRESCALER = conf-&gt;<a class="code" href="structadc__config.html#a4d00211bb40193c0e204e21b8a1cca03">prescaler</a>;
<a name="l00382"></a>00382         adc-&gt;EVCTRL = conf-&gt;<a class="code" href="structadc__config.html#ae9df3c1266c0ed4562ec62c7d5aeddc3">evctrl</a>;
<a name="l00383"></a>00383         adc-&gt;CTRLB = conf-&gt;<a class="code" href="structadc__config.html#adecd65e8a1d84a4467745879ebbb47dc">ctrlb</a>;
<a name="l00384"></a>00384 
<a name="l00385"></a>00385 <span class="preprocessor">#if XMEGA_A</span>
<a name="l00386"></a>00386 <span class="preprocessor"></span>        adc-&gt;CTRLA = enable | conf-&gt;ctrla;
<a name="l00387"></a>00387 <span class="preprocessor">#elif XMEGA_D</span>
<a name="l00388"></a>00388 <span class="preprocessor"></span>        adc-&gt;CTRLA = enable;
<a name="l00389"></a>00389 <span class="preprocessor">#endif</span>
<a name="l00390"></a>00390 <span class="preprocessor"></span>
<a name="l00391"></a>00391         <a class="code" href="adc_8c.html#ab6136d2c6d0aaeb2a6eebc57ca976d55" title="Disable peripheral clock for ADC.">adc_disable_clock</a>(adc);
<a name="l00392"></a>00392 
<a name="l00393"></a>00393         <a class="code" href="group__interrupt__group.html#ga428178bc346431936fddf52ad1ebd6fa" title="Restore global interrupt flags.">cpu_irq_restore</a>(flags);
<a name="l00394"></a>00394 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__adc__module__group_ga617d7a4c8a2c60c0c44bc3602c48b7ef_cgraph.png" border="0" usemap="#group__adc__module__group_ga617d7a4c8a2c60c0c44bc3602c48b7ef_cgraph_map" alt=""></div>
</div>
</p>

</div>
</div>
</div>
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
  <title>@DOC_TITLE@</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>

<table width="100%" height="10%" bgcolor="#FFFFFF">
  <tr>
    <td colspan="6" height="1" background="blue.gif"></td>
  </tr>

  <tr>
    <td colspan="6">
    <address style="align: right;"><small>
Generated on Fri Oct 22 12:15:26 2010 for AVR1300 Using the Xmega ADC by <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0></a> 1.6.3</small></address>
    </td>
  </tr>

</table>
